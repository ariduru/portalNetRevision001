@{
    var id=Request["id"];
    var sec="SELECT * FROM firmalar WHERE id=@0";
    var db=Database.Open("OsgbPortal");
    var firmam=db.QuerySingle(sec,id);
    var firmaAdi=firmam.name;
    var calisanSec="SELECT id,isim, soyisim,tckimlik,telefon,adres,gorev,cinsiyet,medenihal, cocuksayisi,aktif FROM calisanlar WHERE firmaID=@0";
    var calisanlar=db.Query(calisanSec,id);
    var grid=new WebGrid(calisanlar,ajaxUpdateContainerId: "grid");

}
 
<h1><a href="~/Member/edit?id=@id">@firmaAdi</a></h1>
<h2>Çalışanlar</h2><br/>
<a class="link" href="~/Member/firmalar">Firmalar</a>
@if (!Roles.IsUserInRole(WebSecurity.CurrentUserName, "firmaYetkilisi")){ 
<a class="link" href="~/Member/calisanEkle?id=@id">Çalışan Ekle</a>
}

<div class="gridContainer">
    <div class="grid">
        @grid.GetHtml(    
            tableStyle : "table",
            alternatingRowStyle : "alternate",
            headerStyle : "header",
            columns: grid.Columns(
                grid.Column(format: @<a href="~/Member/calisanBelgeEdit?id=@item.id">Belgeleri Düzenle</a>),
                grid.Column(format: @<a href="~/Member/calisandetay?id=@item.id">Çalışan Bilgileri</a>),
                grid.Column("isim","İsim"),
                grid.Column("soyisim","Soyisim"),
                grid.Column("tckimlik","T.C. No"),
                grid.Column("telefon","Telefon"),
                grid.Column("adres","Adres"),
                grid.Column("gorev","Görev"),
                grid.Column("cinsiyet","Cinsiyet"),
                grid.Column("medenihal","Medeni Hal"),
                grid.Column("cocuksayisi","Çocuk Sayısı"),
                grid.Column("aktif","Aktif Çalışan")
           )
        )          
        </div>  
        </div>